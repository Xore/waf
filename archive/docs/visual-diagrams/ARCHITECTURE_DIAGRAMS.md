# WAF Architecture & Visual Diagrams

**Purpose:** Visual representations of WAF architecture and data flows  
**Last Updated:** February 9, 2026

---

## Diagram 1: System Architecture Overview

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                 WINDOWS AUTOMATION FRAMEWORK                    â”‚
â”‚                    (WAF Architecture)                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

                            â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
                            â”‚  NinjaRMM Cloud  â”‚
                            â”‚    Platform     â”‚
                            â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                                     â”‚
                    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
                    â”‚                              â”‚
           â•­â”€â”€â”€â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â”€â”€â”€â•®          â•­â”€â”€â”€â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚  Custom Fields  â”‚          â”‚  WAF Scripts   â”‚
           â”‚   (277+ fields) â”‚          â”‚ (110 scripts)  â”‚
           â”‚                 â”‚          â”‚               â”‚
           â”‚  - OPS (15)     â”‚          â”‚ Core (13)     â”‚
           â”‚  - STAT (10)    â”‚          â”‚ Extended (23) â”‚
           â”‚  - SEC (10)     â”‚          â”‚ Server (11)   â”‚
           â”‚  - CAP (10)     â”‚          â”‚ Patching (5)  â”‚
           â”‚  - UPD (5)      â”‚          â”‚ Custom (58+)  â”‚
           â”‚  - RISK (15)    â”‚          â”‚               â”‚
           â”‚  - DRIFT (10)   â”‚          â”‚ Schedule:     â”‚
           â”‚  - UX (15)      â”‚          â”‚ - Daily       â”‚
           â”‚  - NET (10)     â”‚          â”‚ - Every 8h    â”‚
           â”‚  - APP (15)     â”‚          â”‚ - Every 4h    â”‚
           â”‚  - PRED (10)    â”‚          â”‚ - Every 2h    â”‚
           â”‚  - Server (77+) â”‚          â”‚               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯          â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                    â”‚                              â”‚
                    â”‚    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®    â”‚
                    â””â”€â”€â”€â”€â–º Automation    â—„â”€â”€â”€â”€â”˜
                         â”‚   Policies     â”‚
                         â”‚  (4+ policies) â”‚
                         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                                  â”‚
                                  â”‚ (Executes)
                                  â”‚
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚         Monitored Devices          â”‚
           â”‚                                    â”‚
           â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚
           â”‚  â”‚   NinjaRMM Agent       â”‚  â”‚
           â”‚  â”‚   (Installed locally)   â”‚  â”‚
           â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚
           â”‚            â”‚                   â”‚
           â”‚            â”‚ (Executes as)      â”‚
           â”‚            v                   â”‚
           â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚
           â”‚  â”‚   PowerShell 5.1+      â”‚  â”‚
           â”‚  â”‚   (SYSTEM context)     â”‚  â”‚
           â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚
           â”‚            â”‚                   â”‚
           â”‚            â”‚ (Queries)          â”‚
           â”‚            v                   â”‚
           â”‚  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®  â”‚
           â”‚  â”‚   Data Sources:        â”‚  â”‚
           â”‚  â”‚   - WMI/CIM            â”‚  â”‚
           â”‚  â”‚   - Event Logs         â”‚  â”‚
           â”‚  â”‚   - Registry           â”‚  â”‚
           â”‚  â”‚   - File System        â”‚  â”‚
           â”‚  â”‚   - Performance        â”‚  â”‚
           â”‚  â”‚     Counters           â”‚  â”‚
           â”‚  â”‚   - AD (LDAP://)       â”‚  â”‚
           â”‚  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                                  â”‚
                                  â”‚ (Ninja-Property-Set)
                                  â”‚
                            â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â•®
                            â”‚   Data   â”‚
                            â”‚ Updates â”‚
                            â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                                  â”‚
                    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
                    â”‚                              â”‚
         â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â”€â•®
         â”‚   Dashboards   â”‚  â”‚   Alerts  â”‚  â”‚   Reports  â”‚
         â”‚              â”‚  â”‚           â”‚  â”‚            â”‚
         â”‚ - Health     â”‚  â”‚ - Criticalâ”‚  â”‚ - Daily    â”‚
         â”‚ - Security   â”‚  â”‚ - Warning â”‚  â”‚ - Weekly   â”‚
         â”‚ - Capacity   â”‚  â”‚ - Info    â”‚  â”‚ - Monthly  â”‚
         â”‚ - Compliance â”‚  â”‚           â”‚  â”‚ - Custom   â”‚
         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                    â”‚
                    v
         â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
         â”‚    IT Operations       â”‚
         â”‚    Team / MSP          â”‚
         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Key Concepts:
- Cloud-based orchestration (NinjaRMM)
- Agent-based execution (local devices)
- Data-driven monitoring (277+ metrics)
- Automated scheduling (no manual intervention)
- Multi-layer visualization (dashboards/alerts/reports)
```

---

## Diagram 2: Data Flow Sequence

```
Detailed Execution Flow:

Step 1: Scheduling
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ NinjaRMM Automation Policy     â”‚
â”‚ triggers at scheduled time     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 2: Deployment
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Script deployed to device(s)   â”‚
â”‚ via NinjaRMM Agent              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 3: Execution
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ PowerShell executes as SYSTEM  â”‚
â”‚ with full privileges            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 4: Data Collection
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Script queries system:          â”‚
â”‚                                 â”‚
â”‚ Get-CimInstance Win32_OS       â”‚
â”‚ Get-WinEvent -FilterHashtable  â”‚
â”‚ Get-ItemProperty HKLM:\...     â”‚
â”‚ Get-Counter \Processor(*)\...  â”‚
â”‚ [ADSI]"LDAP://DC=..."          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 5: Processing
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Calculate metrics:              â”‚
â”‚                                 â”‚
â”‚ $score = [Math]::Round(...)    â”‚
â”‚ $status = if (...) {...}       â”‚
â”‚ $json = $data | ConvertTo-Json â”‚
â”‚ $encoded = [Convert]::To...    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 6: Field Update
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Ninja-Property-Set:             â”‚
â”‚                                 â”‚
â”‚ Ninja-Property-Set              â”‚
â”‚   opsHealthScore $score         â”‚
â”‚                                 â”‚
â”‚ Ninja-Property-Set              â”‚
â”‚   opsStatus $status             â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 7: Synchronization
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Agent syncs data back to cloud  â”‚
â”‚ (near real-time)                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 8: Visualization
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Data available in:              â”‚
â”‚ - Dashboards (instant)          â”‚
â”‚ - Alerts (if thresholds met)    â”‚
â”‚ - Reports (scheduled/ad-hoc)    â”‚
â”‚ - Device details (always)       â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â”‚
              v
Step 9: Action
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Technician/System responds:     â”‚
â”‚ - Review dashboard              â”‚
â”‚ - Investigate alert             â”‚
â”‚ - Take corrective action        â”‚
â”‚ - Auto-remediation (if enabled) â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Timing:
- Step 1-6: 10-90 seconds (depends on script)
- Step 7: 1-5 seconds (agent sync)
- Step 8: Instant (data already in cloud)
- Step 9: Variable (human/automation response)

Total Latency: ~15-120 seconds from execution to visibility
```

---

## Diagram 3: Health Score Calculation Flow

```
Health Score Hierarchical Calculation:

                        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
                        â”‚  opsHealthScore   â”‚
                        â”‚  (Overall: 0-100) â”‚
                        â”‚                   â”‚
                        â”‚  Weighted Average â”‚
                        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
                                  â”‚
          â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
          â”‚                                                    â”‚
    â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®
    â”‚ Stability  â”‚  â”‚Performanceâ”‚  â”‚  Security  â”‚  â”‚  Capacity  â”‚
    â”‚   Score    â”‚  â”‚   Score    â”‚  â”‚   Score    â”‚  â”‚   Score    â”‚
    â”‚            â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚
    â”‚  Weight:   â”‚  â”‚  Weight:   â”‚  â”‚  Weight:   â”‚  â”‚  Weight:   â”‚
    â”‚    20%     â”‚  â”‚    20%     â”‚  â”‚    30%     â”‚  â”‚    30%     â”‚
    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
          â”‚                  â”‚                  â”‚                  â”‚
    â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®  â•­â”€â”€â”€â”€â”€vâ”€â”€â”€â”€â”€â•®
    â”‚   Based    â”‚  â”‚   Based    â”‚  â”‚   Based    â”‚  â”‚   Based    â”‚
    â”‚    on:     â”‚  â”‚    on:     â”‚  â”‚    on:     â”‚  â”‚    on:     â”‚
    â”‚            â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚
    â”‚ - Crashes  â”‚  â”‚ - CPU %    â”‚  â”‚ - AV       â”‚  â”‚ - Disk %   â”‚
    â”‚ - Errors   â”‚  â”‚ - Memory % â”‚  â”‚ - Firewall â”‚  â”‚ - Memory % â”‚
    â”‚ - Warnings â”‚  â”‚ - Disk I/O â”‚  â”‚ - Encrypt  â”‚  â”‚ - Forecast â”‚
    â”‚ - Reboots  â”‚  â”‚ - Response â”‚  â”‚ - Updates  â”‚  â”‚ - Growth   â”‚
    â”‚ - Uptime   â”‚  â”‚   Time     â”‚  â”‚ - Vuln     â”‚  â”‚ - Warnings â”‚
    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Formula:
opsHealthScore = 
    (opsStabilityScore    Ã— 0.20) +
    (opsPerformanceScore  Ã— 0.20) +
    (opsSecurityScore     Ã— 0.30) +
    (opsCapacityScore     Ã— 0.30)

Example Calculation:
    Stability:    90 Ã— 0.20 = 18.0
    Performance:  85 Ã— 0.20 = 17.0
    Security:     95 Ã— 0.30 = 28.5
    Capacity:     80 Ã— 0.30 = 24.0
                           -------
    Health Score:          = 87.5 â‰ˆ 88

Interpretation:
    90-100: Excellent
    75-89:  Good      â† This device
    60-74:  Fair
    40-59:  Poor
    0-39:   Critical

Status Assignment:
    if (score >= 75) { status = "Healthy" }
    elseif (score >= 60) { status = "Warning" }
    else { status = "Critical" }

    This device: "Healthy"
```

---

## Diagram 4: Field Category Hierarchy

```
WAF Custom Fields Structure (277+ fields):

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚         WAF CUSTOM FIELDS (All Devices)                 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
          â”‚
          â”œâ”€â”€â”€ ðŸ”´ CORE OPERATIONS (50 fields - Phase 7.1)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ OPS - Operational Health (15)
          â”‚    â”‚    â”œâ”€â”€ Health scores (6)
          â”‚    â”‚    â”œâ”€â”€ Uptime tracking (3)
          â”‚    â”‚    â”œâ”€â”€ Device age (2)
          â”‚    â”‚    â”œâ”€â”€ Status & timestamps (3)
          â”‚    â”‚    â””â”€â”€ Configuration (1)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ STAT - Statistics (10)
          â”‚    â”‚    â”œâ”€â”€ Event counts (4)
          â”‚    â”‚    â”œâ”€â”€ Performance averages (3)
          â”‚    â”‚    â””â”€â”€ Stability metrics (3)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ SEC - Security (10)
          â”‚    â”‚    â”œâ”€â”€ Protection status (7)
          â”‚    â”‚    â””â”€â”€ Compliance (3)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ CAP - Capacity (10)
          â”‚    â”‚    â”œâ”€â”€ Disk metrics (3)
          â”‚    â”‚    â”œâ”€â”€ Memory metrics (3)
          â”‚    â”‚    â”œâ”€â”€ CPU specs (2)
          â”‚    â”‚    â””â”€â”€ Forecasting (2)
          â”‚    â”‚
          â”‚    â””â”€â”€â”€ UPD - Updates (5)
          â”‚         â”œâ”€â”€ Compliance status (3)
          â”‚         â””â”€â”€ Timestamps (2)
          â”‚
          â”œâ”€â”€â”€ ðŸŸ¡ EXTENDED MONITORING (150 fields - Phase 7.2)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ RISK - Risk Classification (15)
          â”‚    â”‚    â”œâ”€â”€ Risk scores (5)
          â”‚    â”‚    â”œâ”€â”€ Business impact (2)
          â”‚    â”‚    â”œâ”€â”€ Management (5)
          â”‚    â”‚    â””â”€â”€ Documentation (3)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ DRIFT - Configuration Drift (10)
          â”‚    â”‚    â”œâ”€â”€ Detection (4)
          â”‚    â”‚    â”œâ”€â”€ Baseline (2)
          â”‚    â”‚    â””â”€â”€ Remediation (4)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ UX - User Experience (15)
          â”‚    â”‚    â”œâ”€â”€ Performance (5)
          â”‚    â”‚    â”œâ”€â”€ Incidents (3)
          â”‚    â”‚    â”œâ”€â”€ User info (3)
          â”‚    â”‚    â””â”€â”€ Patterns (4)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ NET - Network (10)
          â”‚    â”‚    â”œâ”€â”€ Connectivity (3)
          â”‚    â”‚    â”œâ”€â”€ Configuration (4)
          â”‚    â”‚    â””â”€â”€ Performance (3)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ BKP - Backup (10)
          â”‚    â”‚    â”œâ”€â”€ Status (4)
          â”‚    â”‚    â”œâ”€â”€ Configuration (3)
          â”‚    â”‚    â””â”€â”€ Validation (3)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ APP - Applications (15)
          â”‚    â”‚    â”œâ”€â”€ Health (3)
          â”‚    â”‚    â”œâ”€â”€ Inventory (4)
          â”‚    â”‚    â”œâ”€â”€ Incidents (2)
          â”‚    â”‚    â”œâ”€â”€ Compliance (4)
          â”‚    â”‚    â””â”€â”€ Management (2)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ PRED - Predictive Analytics (10)
          â”‚    â”‚    â”œâ”€â”€ Failure prediction (2)
          â”‚    â”‚    â”œâ”€â”€ Capacity forecasts (3)
          â”‚    â”‚    â”œâ”€â”€ Lifecycle (2)
          â”‚    â”‚    â””â”€â”€ Confidence (3)
          â”‚    â”‚
          â”‚    â”œâ”€â”€â”€ AUTO - Automation Control (8)
          â”‚    â”‚    â”œâ”€â”€ Settings (3)
          â”‚    â”‚    â”œâ”€â”€ Tracking (2)
          â”‚    â”‚    â””â”€â”€ Exclusions (3)
          â”‚    â”‚
          â”‚    â””â”€â”€â”€ Extended OPS (67)
          â”‚         â”œâ”€â”€ Advanced health (20)
          â”‚         â”œâ”€â”€ Extended statistics (15)
          â”‚         â”œâ”€â”€ Extended security (12)
          â”‚         â”œâ”€â”€ Extended capacity (10)
          â”‚         â””â”€â”€ Extended updates (10)
          â”‚
          â””â”€â”€â”€ ðŸ”µ SERVER SPECIFIC (77 fields - Phase 7.3)
               â”‚
               â”œâ”€â”€â”€ IIS - Web Server (15)
               â”‚    â”œâ”€â”€ Site health (5)
               â”‚    â”œâ”€â”€ App pools (5)
               â”‚    â””â”€â”€ Performance (5)
               â”‚
               â”œâ”€â”€â”€ SQL - Database (15)
               â”‚    â”œâ”€â”€ Instance health (5)
               â”‚    â”œâ”€â”€ Database status (5)
               â”‚    â””â”€â”€ Performance (5)
               â”‚
               â”œâ”€â”€â”€ AD - Active Directory (12)
               â”‚    â”œâ”€â”€ DC health (4)
               â”‚    â”œâ”€â”€ Replication (4)
               â”‚    â””â”€â”€ FSMO roles (4)
               â”‚
               â”œâ”€â”€â”€ HV - Hyper-V (10)
               â”‚    â”œâ”€â”€ Host health (3)
               â”‚    â”œâ”€â”€ VM status (4)
               â”‚    â””â”€â”€ Resources (3)
               â”‚
               â””â”€â”€â”€ Other Roles (25)
                    â”œâ”€â”€ DHCP (5)
                    â”œâ”€â”€ DNS (5)
                    â”œâ”€â”€ File Server (5)
                    â”œâ”€â”€ Print Server (5)
                    â””â”€â”€ RDS (5)

Legend:
ðŸ”´ Core (Universal - All Devices)
ðŸŸ¡ Extended (Optional - Enhanced Monitoring)
ðŸ”µ Server (Role-Specific - Servers Only)
```

---

## Diagram 5: Script Execution Dependencies

```
Script Execution Order & Dependencies:

Phase 1: Initialization (Run First)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Script 13: Configuration      â”‚
â”‚            Manager            â”‚
â”‚                               â”‚
â”‚ Sets: opsMonitoringEnabled    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Phase 2: Data Collection (Parallel - No Dependencies)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Script 2:      â”‚ â”‚ Script 3:      â”‚ â”‚ Script 4:      â”‚
â”‚ Stability      â”‚ â”‚ Performance    â”‚ â”‚ Security       â”‚
â”‚                â”‚ â”‚                â”‚ â”‚                â”‚
â”‚ Sets:          â”‚ â”‚ Sets:          â”‚ â”‚ Sets:          â”‚
â”‚ - Stability    â”‚ â”‚ - Performance  â”‚ â”‚ - Security     â”‚
â”‚   Score        â”‚ â”‚   Score        â”‚ â”‚   Score        â”‚
â”‚ - Stat fields  â”‚ â”‚ - Stat averagesâ”‚ â”‚ - Sec fields   â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
        |                  |                  |
â•­â”€â”€â”€â”€â”€â”€â”€â”€+â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€+â”€â”€â”€â”€â”€â”€â”€â”€â•®
        |                  |                  |
        v                  v                  v
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Script 5:      â”‚ â”‚ Script 7:      â”‚ â”‚ Script 11:     â”‚
â”‚ Capacity       â”‚ â”‚ Uptime         â”‚ â”‚ Network        â”‚
â”‚                â”‚ â”‚                â”‚ â”‚                â”‚
â”‚ Sets:          â”‚ â”‚ Sets:          â”‚ â”‚ Sets:          â”‚
â”‚ - Capacity     â”‚ â”‚ - Uptime       â”‚ â”‚ - Network      â”‚
â”‚   Score        â”‚ â”‚ - Boot time    â”‚ â”‚   fields       â”‚
â”‚ - Cap fields   â”‚ â”‚ - Device age   â”‚ â”‚                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
        |                  |                  |
        +------------------+------------------+
                          |
                          v
Phase 3: Aggregation (Depends on Phase 2)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Script 1: Health Score         â”‚
â”‚           Calculator           â”‚
â”‚                                â”‚
â”‚ Reads:                         â”‚
â”‚ - opsStabilityScore            â”‚
â”‚ - opsPerformanceScore          â”‚
â”‚ - opsSecurityScore             â”‚
â”‚ - opsCapacityScore             â”‚
â”‚                                â”‚
â”‚ Calculates:                    â”‚
â”‚ - opsHealthScore               â”‚
â”‚ - opsOverallScore              â”‚
â”‚ - opsStatus                    â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

IMPORTANT:
- Script 1 MUST run AFTER Scripts 2-5
- Scripts 2-11 can run in parallel
- If Script 1 runs first, scores will be 0
- Automation policies enforce this order

Recommended Schedule:
01:00 - Script 13 (Config)
02:00 - Scripts 2,3,4,5,7,11 (Parallel OK)
03:00 - Script 1 (Health aggregation)
```

---

**Last Updated:** February 9, 2026, 1:19 AM CET
